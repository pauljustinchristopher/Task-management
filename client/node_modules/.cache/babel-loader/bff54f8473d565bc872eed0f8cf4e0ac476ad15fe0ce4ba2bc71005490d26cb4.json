{"ast":null,"code":"import React,{useState}from'react';import{Outlet,useNavigate}from'react-router-dom';import{Box,Drawer,AppBar,Toolbar,List,Typography,Divider,IconButton,Avatar,Menu,MenuItem,ListItem,ListItemButton,ListItemIcon,ListItemText,Badge,useTheme,useMediaQuery,Tooltip}from'@mui/material';import{Menu as MenuIcon,ChevronLeft,Dashboard,Assignment,People,Analytics,Settings,AccountCircle,Logout,Notifications,LightMode,DarkMode,Help}from'@mui/icons-material';import{useAuth}from'../../contexts/AuthContext';import{useTheme as useThemeContext}from'../../contexts/ThemeContext';import{useSocket}from'../../contexts/SocketContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const drawerWidth=280;const MainLayout=()=>{var _user$firstName,_user$lastName,_user$firstName2,_user$lastName2;const[open,setOpen]=useState(true);const[anchorEl,setAnchorEl]=useState(null);const theme=useTheme();const isMobile=useMediaQuery(theme.breakpoints.down('md'));const{user,logout}=useAuth();const{toggleTheme,mode}=useThemeContext();const{notifications}=useSocket();const navigate=useNavigate();const menuItems=[{text:'Dashboard',icon:/*#__PURE__*/_jsx(Dashboard,{}),path:'/dashboard'},{text:'Projects',icon:/*#__PURE__*/_jsx(Assignment,{}),path:'/projects'},{text:'Tasks',icon:/*#__PURE__*/_jsx(Assignment,{}),path:'/tasks'},{text:'Team',icon:/*#__PURE__*/_jsx(People,{}),path:'/team'},{text:'Analytics',icon:/*#__PURE__*/_jsx(Analytics,{}),path:'/analytics'},{text:'Settings',icon:/*#__PURE__*/_jsx(Settings,{}),path:'/settings'}];const handleDrawerToggle=()=>{setOpen(!open);};const handleProfileMenuOpen=event=>{setAnchorEl(event.currentTarget);};const handleProfileMenuClose=()=>{setAnchorEl(null);};const handleLogout=async()=>{handleProfileMenuClose();await logout();navigate('/login');};const handleNavigation=path=>{navigate(path);if(isMobile){setOpen(false);}};const drawer=/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'space-between',padding:theme.spacing(2),minHeight:64},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",sx:{fontWeight:'bold'},children:\"TaskFlow\"}),!isMobile&&/*#__PURE__*/_jsx(IconButton,{onClick:handleDrawerToggle,children:/*#__PURE__*/_jsx(ChevronLeft,{})})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(List,{children:menuItems.map(item=>/*#__PURE__*/_jsx(ListItem,{disablePadding:true,children:/*#__PURE__*/_jsxs(ListItemButton,{onClick:()=>handleNavigation(item.path),sx:{'&:hover':{backgroundColor:theme.palette.action.hover}},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:item.icon}),/*#__PURE__*/_jsx(ListItemText,{primary:item.text})]})},item.text))}),/*#__PURE__*/_jsx(Divider,{sx:{mt:'auto'}}),/*#__PURE__*/_jsx(Box,{sx:{p:2,mt:'auto'},children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:2,p:2,backgroundColor:theme.palette.action.hover,borderRadius:2},children:[/*#__PURE__*/_jsxs(Avatar,{src:user===null||user===void 0?void 0:user.avatar,alt:user===null||user===void 0?void 0:user.firstName,sx:{width:40,height:40},children:[user===null||user===void 0?void 0:(_user$firstName=user.firstName)===null||_user$firstName===void 0?void 0:_user$firstName[0],user===null||user===void 0?void 0:(_user$lastName=user.lastName)===null||_user$lastName===void 0?void 0:_user$lastName[0]]}),/*#__PURE__*/_jsxs(Box,{sx:{flexGrow:1,minWidth:0},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle2\",noWrap:true,children:[user===null||user===void 0?void 0:user.firstName,\" \",user===null||user===void 0?void 0:user.lastName]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",noWrap:true,children:user===null||user===void 0?void 0:user.email})]})]})})]});return/*#__PURE__*/_jsxs(Box,{sx:{display:'flex'},children:[/*#__PURE__*/_jsx(AppBar,{position:\"fixed\",sx:{width:{md:\"calc(100% - \".concat(open?drawerWidth:0,\"px)\")},ml:{md:\"\".concat(open?drawerWidth:0,\"px\")},transition:theme.transitions.create(['width','margin'],{easing:theme.transitions.easing.sharp,duration:theme.transitions.duration.leavingScreen})},children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(IconButton,{color:\"inherit\",\"aria-label\":\"open drawer\",edge:\"start\",onClick:handleDrawerToggle,sx:{mr:2,display:{md:open?'none':'block'}},children:/*#__PURE__*/_jsx(MenuIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",noWrap:true,component:\"div\",sx:{flexGrow:1},children:\"Project Management Dashboard\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Toggle theme\",children:/*#__PURE__*/_jsx(IconButton,{color:\"inherit\",onClick:toggleTheme,children:mode==='dark'?/*#__PURE__*/_jsx(LightMode,{}):/*#__PURE__*/_jsx(DarkMode,{})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Notifications\",children:/*#__PURE__*/_jsx(IconButton,{color:\"inherit\",children:/*#__PURE__*/_jsx(Badge,{badgeContent:(notifications===null||notifications===void 0?void 0:notifications.length)||0,color:\"error\",children:/*#__PURE__*/_jsx(Notifications,{})})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Help\",children:/*#__PURE__*/_jsx(IconButton,{color:\"inherit\",children:/*#__PURE__*/_jsx(Help,{})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Account\",children:/*#__PURE__*/_jsx(IconButton,{color:\"inherit\",onClick:handleProfileMenuOpen,sx:{ml:1},children:/*#__PURE__*/_jsxs(Avatar,{src:user===null||user===void 0?void 0:user.avatar,alt:user===null||user===void 0?void 0:user.firstName,sx:{width:32,height:32},children:[user===null||user===void 0?void 0:(_user$firstName2=user.firstName)===null||_user$firstName2===void 0?void 0:_user$firstName2[0],user===null||user===void 0?void 0:(_user$lastName2=user.lastName)===null||_user$lastName2===void 0?void 0:_user$lastName2[0]]})})})]})]})}),/*#__PURE__*/_jsxs(Menu,{anchorEl:anchorEl,open:Boolean(anchorEl),onClose:handleProfileMenuClose,PaperProps:{elevation:3,sx:{mt:1.5,minWidth:200}},children:[/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>{handleProfileMenuClose();navigate('/profile');},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(AccountCircle,{fontSize:\"small\"})}),\"Profile\"]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>{handleProfileMenuClose();navigate('/settings');},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(Settings,{fontSize:\"small\"})}),\"Settings\"]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(MenuItem,{onClick:handleLogout,children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(Logout,{fontSize:\"small\"})}),\"Logout\"]})]}),/*#__PURE__*/_jsx(Box,{component:\"nav\",sx:{width:{md:drawerWidth},flexShrink:{md:0}},children:/*#__PURE__*/_jsx(Drawer,{variant:isMobile?'temporary':'persistent',open:open,onClose:handleDrawerToggle,ModalProps:{keepMounted:true// Better open performance on mobile.\n},sx:{'& .MuiDrawer-paper':{boxSizing:'border-box',width:drawerWidth,display:'flex',flexDirection:'column'}},children:drawer})}),/*#__PURE__*/_jsx(Box,{component:\"main\",sx:{flexGrow:1,pt:8,width:{md:\"calc(100% - \".concat(open?drawerWidth:0,\"px)\")},transition:theme.transitions.create('width',{easing:theme.transitions.easing.sharp,duration:theme.transitions.duration.leavingScreen})},children:/*#__PURE__*/_jsx(Outlet,{})})]});};export default MainLayout;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}