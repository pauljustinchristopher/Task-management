{"ast":null,"code":"import _objectSpread from\"C:/Users/paulj/Desktop/SIWES/defence project/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import{Container,Paper,TextField,Button,Typography,Box,Alert,CircularProgress,InputAdornment,IconButton,Divider,Checkbox,FormControlLabel,LinearProgress,Chip}from'@mui/material';import{Visibility,VisibilityOff,Email,Lock,Person,Check,Clear}from'@mui/icons-material';import{useAuth}from'../../contexts/AuthContext';import{isValidEmail,isValidPassword,isValidName}from'../../utils/validation';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Register=()=>{const[formData,setFormData]=useState({firstName:'',lastName:'',email:'',password:'',confirmPassword:'',agreeToTerms:false});const[errors,setErrors]=useState({});const[showPassword,setShowPassword]=useState(false);const[showConfirmPassword,setShowConfirmPassword]=useState(false);const[passwordStrength,setPasswordStrength]=useState(0);const{register,loading,error}=useAuth();const navigate=useNavigate();const getPasswordStrength=password=>{let strength=0;if(password.length>=8)strength+=1;if(/[a-z]/.test(password))strength+=1;if(/[A-Z]/.test(password))strength+=1;if(/[0-9]/.test(password))strength+=1;if(/[^A-Za-z0-9]/.test(password))strength+=1;return strength;};const getPasswordStrengthLabel=strength=>{switch(strength){case 0:case 1:return{label:'Very Weak',color:'error'};case 2:return{label:'Weak',color:'warning'};case 3:return{label:'Medium',color:'info'};case 4:return{label:'Strong',color:'success'};case 5:return{label:'Very Strong',color:'success'};default:return{label:'',color:'primary'};}};const handleChange=e=>{const{name,value,checked}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:name==='agreeToTerms'?checked:value}));// Update password strength\nif(name==='password'){setPasswordStrength(getPasswordStrength(value));}// Clear field error when user starts typing\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:''}));}};const validateForm=()=>{const newErrors={};if(!formData.firstName){newErrors.firstName='First name is required';}else if(!isValidName(formData.firstName)){newErrors.firstName='Please enter a valid first name';}if(!formData.lastName){newErrors.lastName='Last name is required';}else if(!isValidName(formData.lastName)){newErrors.lastName='Please enter a valid last name';}if(!formData.email){newErrors.email='Email is required';}else if(!isValidEmail(formData.email)){newErrors.email='Please enter a valid email address';}if(!formData.password){newErrors.password='Password is required';}else if(!isValidPassword(formData.password)){newErrors.password='Password must be at least 8 characters with uppercase, lowercase, number, and special character';}if(!formData.confirmPassword){newErrors.confirmPassword='Please confirm your password';}else if(formData.password!==formData.confirmPassword){newErrors.confirmPassword='Passwords do not match';}if(!formData.agreeToTerms){newErrors.agreeToTerms='You must agree to the terms and conditions';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}try{await register({firstName:formData.firstName,lastName:formData.lastName,email:formData.email,password:formData.password});navigate('/dashboard');}catch(err){// Error is handled by AuthContext\n}};const handleGoogleRegister=()=>{// Implement Google OAuth registration\nwindow.location.href=\"\".concat(process.env.REACT_APP_API_URL,\"/auth/google\");};const strengthInfo=getPasswordStrengthLabel(passwordStrength);return/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"sm\",children:/*#__PURE__*/_jsx(Box,{sx:{marginTop:4,display:'flex',flexDirection:'column',alignItems:'center'},children:/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{padding:4,display:'flex',flexDirection:'column',alignItems:'center',width:'100%'},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h4\",gutterBottom:true,children:\"Create Account\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",sx:{mb:3},children:\"Join us to start managing your projects efficiently\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{width:'100%',mb:2},children:error}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,sx:{mt:1,width:'100%'},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:2},children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"firstName\",label:\"First Name\",name:\"firstName\",autoComplete:\"given-name\",autoFocus:true,value:formData.firstName,onChange:handleChange,error:!!errors.firstName,helperText:errors.firstName,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(Person,{})})}}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"lastName\",label:\"Last Name\",name:\"lastName\",autoComplete:\"family-name\",value:formData.lastName,onChange:handleChange,error:!!errors.lastName,helperText:errors.lastName,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(Person,{})})}})]}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"email\",label:\"Email Address\",name:\"email\",autoComplete:\"email\",value:formData.email,onChange:handleChange,error:!!errors.email,helperText:errors.email,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(Email,{})})}}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:showPassword?'text':'password',id:\"password\",autoComplete:\"new-password\",value:formData.password,onChange:handleChange,error:!!errors.password,helperText:errors.password,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(Lock,{})}),endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"toggle password visibility\",onClick:()=>setShowPassword(!showPassword),edge:\"end\",children:showPassword?/*#__PURE__*/_jsx(VisibilityOff,{}):/*#__PURE__*/_jsx(Visibility,{})})})}}),formData.password&&/*#__PURE__*/_jsxs(Box,{sx:{mt:1,mb:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1,mb:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Password Strength:\"}),/*#__PURE__*/_jsx(Chip,{label:strengthInfo.label,color:strengthInfo.color,size:\"small\",icon:passwordStrength>=4?/*#__PURE__*/_jsx(Check,{}):/*#__PURE__*/_jsx(Clear,{})})]}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:passwordStrength/5*100,color:strengthInfo.color,sx:{height:6,borderRadius:3}})]}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"confirmPassword\",label:\"Confirm Password\",type:showConfirmPassword?'text':'password',id:\"confirmPassword\",autoComplete:\"new-password\",value:formData.confirmPassword,onChange:handleChange,error:!!errors.confirmPassword,helperText:errors.confirmPassword,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(Lock,{})}),endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"toggle confirm password visibility\",onClick:()=>setShowConfirmPassword(!showConfirmPassword),edge:\"end\",children:showConfirmPassword?/*#__PURE__*/_jsx(VisibilityOff,{}):/*#__PURE__*/_jsx(Visibility,{})})})}}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{name:\"agreeToTerms\",checked:formData.agreeToTerms,onChange:handleChange,color:\"primary\"}),label:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"I agree to the\",' ',/*#__PURE__*/_jsx(Link,{to:\"/terms\",style:{color:'#1976d2'},children:\"Terms of Service\"}),' ',\"and\",' ',/*#__PURE__*/_jsx(Link,{to:\"/privacy\",style:{color:'#1976d2'},children:\"Privacy Policy\"})]}),sx:{mt:2}}),errors.agreeToTerms&&/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"error\",sx:{mt:1},children:errors.agreeToTerms}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2,py:1.5},disabled:loading,children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:24}):'Create Account'}),/*#__PURE__*/_jsx(Divider,{sx:{my:2},children:\"OR\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"outlined\",sx:{mb:2,py:1.5},onClick:handleGoogleRegister,startIcon:/*#__PURE__*/_jsx(\"img\",{src:\"/images/google-icon.png\",alt:\"Google\",style:{width:20,height:20}}),children:\"Continue with Google\"}),/*#__PURE__*/_jsx(Box,{sx:{textAlign:'center',mt:2},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Already have an account?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/login\",style:{textDecoration:'none',color:'#1976d2',fontWeight:'bold'},children:\"Sign in here\"})]})})]})]})})});};export default Register;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}