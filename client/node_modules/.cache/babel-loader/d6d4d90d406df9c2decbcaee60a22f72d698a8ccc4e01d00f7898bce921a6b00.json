{"ast":null,"code":"import _objectSpread from\"C:/Users/paulj/Desktop/SIWES/defence project/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import{Container,Paper,TextField,Button,Typography,Box,Alert,CircularProgress,InputAdornment,IconButton,Divider,Checkbox,FormControlLabel}from'@mui/material';import{Visibility,VisibilityOff,Email,Lock}from'@mui/icons-material';import{useAuth}from'../../contexts/AuthContext';import{isValidEmail,isValidPassword}from'../../utils/validation';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[formData,setFormData]=useState({email:'',password:'',rememberMe:false});const[errors,setErrors]=useState({});const[showPassword,setShowPassword]=useState(false);const{login,loading,error}=useAuth();const navigate=useNavigate();const handleChange=e=>{const{name,value,checked}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:name==='rememberMe'?checked:value}));// Clear field error when user starts typing\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:''}));}};const validateForm=()=>{const newErrors={};if(!formData.email){newErrors.email='Email is required';}else if(!isValidEmail(formData.email)){newErrors.email='Please enter a valid email address';}if(!formData.password){newErrors.password='Password is required';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}try{await login(formData.email,formData.password,formData.rememberMe);navigate('/dashboard');}catch(err){// Error is handled by AuthContext\n}};const handleGoogleLogin=()=>{// Implement Google OAuth login\nwindow.location.href=\"\".concat(process.env.REACT_APP_API_URL,\"/auth/google\");};return/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"sm\",children:/*#__PURE__*/_jsx(Box,{sx:{marginTop:8,display:'flex',flexDirection:'column',alignItems:'center'},children:/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{padding:4,display:'flex',flexDirection:'column',alignItems:'center',width:'100%'},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h4\",gutterBottom:true,children:\"Welcome Back\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",sx:{mb:3},children:\"Sign in to your account to continue\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{width:'100%',mb:2},children:error}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,sx:{mt:1,width:'100%'},children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"email\",label:\"Email Address\",name:\"email\",autoComplete:\"email\",autoFocus:true,value:formData.email,onChange:handleChange,error:!!errors.email,helperText:errors.email,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(Email,{})})}}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:showPassword?'text':'password',id:\"password\",autoComplete:\"current-password\",value:formData.password,onChange:handleChange,error:!!errors.password,helperText:errors.password,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(Lock,{})}),endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"toggle password visibility\",onClick:()=>setShowPassword(!showPassword),edge:\"end\",children:showPassword?/*#__PURE__*/_jsx(VisibilityOff,{}):/*#__PURE__*/_jsx(Visibility,{})})})}}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mt:2},children:[/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{name:\"rememberMe\",checked:formData.rememberMe,onChange:handleChange,color:\"primary\"}),label:\"Remember me\"}),/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",style:{textDecoration:'none',color:'#1976d2'},children:\"Forgot Password?\"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2,py:1.5},disabled:loading,children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:24}):'Sign In'}),/*#__PURE__*/_jsx(Divider,{sx:{my:2},children:\"OR\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"outlined\",sx:{mb:2,py:1.5},onClick:handleGoogleLogin,startIcon:/*#__PURE__*/_jsx(\"img\",{src:\"/images/google-icon.png\",alt:\"Google\",style:{width:20,height:20}}),children:\"Continue with Google\"}),/*#__PURE__*/_jsx(Box,{sx:{textAlign:'center',mt:2},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",style:{textDecoration:'none',color:'#1976d2',fontWeight:'bold'},children:\"Sign up here\"})]})})]})]})})});};export default Login;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}